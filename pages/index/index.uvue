<template>
	<sn-page id="page">
		<sn-topbar title="SinleUI" 
		height="80px" 
		menuButton
		blur
		:backButton="false"
		:menuData="menuData"
		@menu-click="menuClicked"></sn-topbar>
		<com-card>
			<sn-alert type="primary" 
			text="SinleUI å…¨æ–°å‘å¸ƒï¼Œæ¬¢è¿å„ä½å¤§ä½¬ä½“éªŒ" 
			icon="notification-fill">
			</sn-alert>
			<sn-form-item class="m-t-8" label="è·Ÿéšç³»ç»Ÿä¸»é¢˜">
				<sn-switch v-model="autoTheme">
				</sn-switch>
			</sn-form-item>
			<sn-form-item label="å“€æ‚¼æ¨¡å¼">
				<sn-switch v-model="grayMode">
				</sn-switch>
			</sn-form-item>
			<sn-form-item label="å­—ä½“">
				<sn-slider v-model="fontSizeValue"
				:max="30"
				:min="5"
				showValueText
				@change="changeSize"></sn-slider>
			</sn-form-item>
			<sn-form-item label="åœ†è§’">
				<sn-slider v-model="radiusValue"
				:max="30"
				:min="0"
				showValueText
				@change="changeRadius"></sn-slider>
			</sn-form-item>
			<sn-button type="primary" 
			text="åˆ‡æ¢ä¸»é¢˜"
			@click="changeTheme">
			</sn-button>
		</com-card>
		<!--
		<com-card title="æµ‹è¯•é¡µ - å¼€å‘ç”¨é€” ">
			<sn-button text="å‰å¾€"
			@click="goTo('/pages/other/temp')"></sn-button>
			<sn-button text="æµ‹è¯•æŒ‰é’®"
			@click="testButton()"></sn-button>
		</com-card>
		-->
		<com-card title="ğŸ‰æ–°ç‰¹æ€§é€Ÿè§ˆğŸŠ">
			<sn-grid-group>
				<sn-grid-item v-for="(e,index) in (newFeatures as UTSJSONObject[])" 
				class="com-item" 
				:key="index"
				@click="goTo((e['src'] ?? '') as string)">
					<sn-icon :name="e['icon']??''">
					</sn-icon>
					<sn-text align="center"
					size="$1"
					:text="e['text']??''" >
					</sn-text>
				</sn-grid-item>
			</sn-grid-group>
		</com-card>
		<com-card v-for="(list, listIndex) in (comLists as UTSJSONObject[])" :key="listIndex" :title="list['name']">
			<sn-grid-group>
				<sn-grid-item v-for="(e,index) in (list['data'] as UTSJSONObject[])" class="com-item" :key="index"
					@click="gotoComponentPage(e)">
					<sn-icon :name="e['icon']??''"></sn-icon>
					<sn-text align="center"
					size="$1"
					:text="e['text']??''" ></sn-text>
				</sn-grid-item>
			</sn-grid-group>
		</com-card>
		<com-card title="æ ¸å¿ƒåº“">
			<sn-grid-group>
				<sn-grid-item v-for="(e,index) in (libList as UTSJSONObject[])" class="com-item" :key="index"
					@click="gotoLibPage(e)">
					<sn-icon :name="e['icon']??''"></sn-icon>
					<sn-text size="$1"
					:text="e['text']??''"></sn-text>
				</sn-grid-item>
			</sn-grid-group>
		</com-card>
		<sn-backtop type="primary" 
		level="second"
		listenTo="page"></sn-backtop>
	</sn-page>
</template>

<script setup>
	import { $snui, SnDataItem,  } from '@/uni_modules/sinle-ui'
	
	const snu = $snui.utils
	const theme = computed(() : string => $snui.configs.app.theme)
	const fontSizeValue = ref<number>(snu.getPx($snui.configs.font.baseSize))
	const radiusValue = ref<number>(snu.getPx($snui.configs.radius.baseSize))
	
	function setSettings(key: string, value: any){
		let configs = $snui.store.get('app_settings') as UTSJSONObject | null
		if (configs == null) return
		configs[key] = value
		$snui.store.set('app_settings', configs, true)
	}
	
	const autoTheme = ref(false)
	const grayMode = ref(false)
	
	onLoad((_)=>{
		autoTheme.value = $snui.configs.app.autoTheme
		grayMode.value = $snui.configs.app.grayMode
	})
	
	watch(autoTheme, (value:boolean)=>{
		$snui.configs.app.autoTheme = value
		setSettings('autoTheme', value)
	})
	
	watch(grayMode, (value:boolean)=>{
		$snui.configs.app.grayMode = value
		setSettings('grayMode', value)
	})
	
	const menuData = [
		{id:'about',icon:'information-line',text:'å…³äº'},
		{id:'document',icon:'book-2-line',text:'æ–‡æ¡£'},
		{id:'uniappx',icon:'user-2-line',text:'uni-app x'},
		{id:'ui',icon:'quill-pen-line',text:'UI æ¡†æ¶æ¨è'}
	] as SnDataItem[]
	
	const newFeatures = [
		{
			icon: 'barcode-box-line',
			text: 'åä¸ºç å›¾',
			src: '/pages/components/sn-e-scankit-code'
		},
		{
			icon: 'group-line',
			text: 'å¤´åƒç»„',
			src: '/pages/components/sn-avatar-group',
		},
		{
			icon: 'arrow-right-circle-line',
			text: 'æ“ä½œèœå•',
			src: '/pages/components/sn-actionsheet'
		},
		{
			icon: 'drop-line',
			text: 'é«˜æ–¯æ¨¡ç³Š',
			src: '/pages/components/sn-e-blurview',
		},
		{
			icon: 'information-line',
			text: 'æç¤ºæ¡†',
			src: '/pages/libs/sn-utils?page=platform'
		},
		{
			icon: 'share-circle-line',
			text: 'ç³»ç»Ÿåˆ†äº«',
			src: '/pages/libs/sn-utils?page=os'
		}
	]
	
	function testButton(){
	}
	
	function goTo(src:string){
		uni.navigateTo({
			url:src
		})
	}
	
	
	function changeSize(v: number) {
		snu.debounce(()=>{
			$snui.configs.font.baseSize = `${v}px`
			setSettings('fontSize',v)
		}, 100, 'snui-font-size')
	}
	
	function changeRadius(v: number) {
		snu.debounce(()=>{
			$snui.configs.radius.baseSize = `${v}px`
			setSettings('borderRadius',v)
		}, 100, 'snui-border-radius')
		
	}

	function changeTheme() {
		let _theme = theme.value == 'light' ? 'dark' : 'light'
		$snui.configs.app.theme = _theme
		setSettings('theme',_theme)
		setSettings('autoTheme', false)
	}


	function menuClicked(item: SnDataItem){
		switch (item.id) {
			case 'about':
				goTo('/pages/other/about')
				break;
			case 'document':
				snu.openLink('https://singmywp.github.io/')
				break;
			case 'uniappx':
				snu.openLink('https://doc.dcloud.net.cn/uni-app-x/')
				break;
			case 'ui':
				goTo('/pages/other/ui')
				break;
			default:
				break
		}
	}

	const basicList = [
		{
			icon: 'text',
			text: 'æ–‡æœ¬',
			name: 'sn-text',
		},
		{
			icon: 'rectangle-line',
			text: 'æŒ‰é’®',
			name: 'sn-button',
		},
		{
			icon: 'instance-line',
			text: 'è§†å›¾å®¹å™¨',
			name: 'sn-view',
		},
		{
			icon: 'image-line',
			text: 'å›¾ç‰‡',
			name: 'sn-image',
		},
		{
			icon: 'remixicon-line',
			text: 'å›¾æ ‡',
			name: 'sn-icon',
		},
		{
			icon: 'separator',
			text: 'åˆ†å‰²çº¿',
			name: 'sn-line',
		},
		{
			icon: 'link',
			text: 'é“¾æ¥',
			name: 'sn-link',
		},
		{
			icon: 'remix-run-line',
			text: 'è¿‡æ¸¡åŠ¨ç”»',
			name: 'sn-transition',
		},
	]

	const formList = [
		{
			icon: 'article-line',
			text: 'è¡¨å•',
			name: 'sn-form',
		},
		{
			icon: 'toggle-line',
			text: 'å¼€å…³',
			name: 'sn-switch',
		},
		{
			icon: 'checkbox-line',
			text: 'å¤é€‰æ¡†',
			name: 'sn-checkbox',
		},
		{
			icon: 'radio-button-line',
			text: 'å•é€‰æ¡†',
			name: 'sn-radio',
		},
		{
			icon: 'input-field',
			text: 'è¾“å…¥æ¡†',
			name: 'sn-input',
		},
		{
			icon: 'text-block',
			text: 'æ–‡æœ¬åŸŸ',
			name: 'sn-textarea',
		},
		{
			icon: 'star-line',
			text: 'è¯„åˆ†',
			name: 'sn-rate',
		},
		{
			icon: 'skip-down-line',
			text: 'é€‰æ‹©æ¡†',
			name: 'sn-select',
		},
		{
			icon: 'add-box-line',
			text: 'æ­¥è¿›å™¨',
			name: 'sn-stepper',
		},
		{
			icon: 'equalizer-2-line',
			text: 'æ»‘åŠ¨é€‰æ‹©',
			name: 'sn-slider',
		},
		{
			icon: 'gallery-upload-line',
			text: 'åª’ä½“ä¸Šä¼ ',
			name: 'sn-upload-media',
		},
		{
			icon: 'cursor-line',
			text: 'é€‰æ‹©å™¨å®¹å™¨',
			name: 'sn-picker-view',
		},
		{
			icon: 'cursor-fill',
			text: 'é€‰æ‹©å™¨',
			name: 'sn-picker',
		},
		{
			icon: 'check-line',
			text: 'æ ‡ç­¾å•é€‰',
			name: 'sn-label-radio'
		},
		{
			icon: 'check-double-line',
			text: 'æ ‡ç­¾å¤šé€‰',
			name: 'sn-label-checkbox',
		},
	]

	const displayList = [
		{
			icon: 'alarm-warning-line',
			text: 'è­¦å‘Šä¿¡æ¯',
			name: 'sn-alert',
		},
		{
			icon: 'notification-4-line',
			text: 'é€šçŸ¥æ ',
			name: 'sn-notice-bar',
		},
		{
			icon: 'notification-badge-line',
			text: 'å¾½æ ‡',
			name: 'sn-badge',
		},
		{
			icon: 'price-tag-3-line',
			text: 'æ ‡ç­¾',
			name: 'sn-tag',
		},
		{
			icon: 'id-card-line',
			text: 'å¡ç‰‡',
			name: 'sn-card',
		},
		{
			icon: 'file-list-2-line',
			text: 'åˆ—è¡¨',
			name: 'sn-list',
		},
		{
			icon: 'list-view',
			text: 'é•¿åˆ—è¡¨',
			name: 'sn-longlist',
		},
		{
			icon: 'timer-2-line',
			text: 'å€’è®¡æ—¶',
			name: 'sn-countdown',
		},
		{
			icon: 'number-6',
			text: 'æ•°å­—æ»šåŠ¨',
			name: 'sn-countto',
		},
		{
			icon: 'timer-line',
			text: 'è®¡æ—¶å™¨',
			name: 'sn-timer',
		},
		{
			icon: 'loader-4-line',
			text: 'åŠ è½½',
			name: 'sn-loading',
		},
		{
			icon: 'loader-3-line',
			text: 'åŠ è½½é¡µ',
			name: 'sn-loading-page',
		},
		{
			icon: 'bar-chart-horizontal-fill',
			text: 'éª¨æ¶å±',
			name: 'sn-skeleton',
		},
		{
			icon: 'markdown-line',
			text: 'å¯Œæ–‡æœ¬',
			name: 'sn-markdown',
		},
		{
			icon: 'dice-4-line',
			text: 'æŸ¥çœ‹æ›´å¤š',
			name: 'sn-more', 
		},
		{
			icon: 'barcode-line',
			text: 'æ¡å½¢ç ',
			name: 'sn-e-barcode',
		},
		{
			icon: 'qr-code-line',
			text: 'äºŒç»´ç ',
			name: 'sn-e-qrcode',
		},
		{
			icon: 'file-image-line',
			text: 'SVG',
			name: 'sn-e-svg',
		},
		{
			icon: 'calendar-schedule-line',
			text: 'æ—¥æœŸæ ¼å¼åŒ–',
			name: 'sn-dateformat',
		},
		{
			icon: 'barcode-box-line',
			text: 'åä¸ºç å›¾',
			name: 'sn-e-scankit-code'
		},
		{
			icon: 'user-smile-line',
			text: 'å¤´åƒ',
			name: 'sn-avatar',
		},
		{
			icon: 'group-line',
			text: 'å¤´åƒç»„',
			name: 'sn-avatar-group',
		},
	]

	const feedbackList = [
		{
			icon: 'question-mark',
			text: 'ç¼ºçœé¡µ',
			name: 'sn-empty',
		},
		{
			icon: 'file-check-line',
			text: 'ç»“æœé¡µ',
			name: 'sn-result'
		},
		{
			icon: 'shadow-line',
			text: 'é®ç½©å±‚',
			name: 'sn-overlay',
		},
		{
			icon: 'chat-3-line',
			text: 'å¼¹å‡ºå±‚',
			name: 'sn-popup',
		},
		{
			icon: 'archive-drawer-line',
			text: 'æŠ½å±‰',
			name: 'sn-drawer',
		},
		{
			icon: 'chat-smile-2-line',
			text: 'æ¨¡æ€æ¡†',
			name: 'sn-modal',
		},
		{
			icon: 'message-3-line',
			text: 'è½»æç¤º',
			name: 'sn-toast',
		},
		{
			icon: 'sticky-note-line',
			text: 'å¼¹å‡ºæç¤º',
			name: 'sn-tooltip',
		},
		{
			icon: 'skip-down-line',
			text: 'åŠ è½½æ›´å¤š',
			name: 'sn-loadmore',
		},
		{
			icon: 'refresh-line',
			text: 'ä¸‹æ‹‰åˆ·æ–°',
			name: 'sn-refresher',
		},
		{
			icon: 'bar-chart-horizontal-line',
			text: 'è¿›åº¦æ¡',
			name: 'sn-progress'
		},
		{
			icon: 'arrow-right-circle-line',
			text: 'æ“ä½œèœå•',
			name: 'sn-actionsheet'
		}
	]

	const layoutList = [
		{
			icon: 'pages-line',
			text: 'é¡µé¢',
			name: 'sn-page',
		},
		{
			icon: 'space',
			text: 'å ä½é—´éš”',
			name: 'sn-gap',
		},
		{
			icon: 'skip-up-line',
			text: 'è¿”å›é¡¶éƒ¨',
			name: 'sn-backtop',
		},
		{
			icon: 'layout-bottom-line',
			text: 'æŠ˜å é¢æ¿',
			name: 'sn-collapse',
		},
		{
			icon: 'layout-row-line',
			text: 'æ°´å¹³å¸ƒå±€',
			name: 'sn-row',
		},
		{
			icon: 'layout-column-line',
			text: 'å‚ç›´å¸ƒå±€',
			name: 'sn-col',
		},
		{
			icon: 'grid-line',
			text: 'å®«æ ¼å¸ƒå±€',
			name: 'sn-grid',
		},
		{
			icon: 'kanban-view-2',
			text: 'åˆ†æ®µå™¨',
			name: 'sn-subsection',
		},
		{
			icon: 'folder-3-line',
			text: 'æ ‡ç­¾é¡µ',
			name: 'sn-tabs',
		},
		{
			icon: 'compass-discover-line',
			text: 'å¯¼èˆªæ ',
			name: 'sn-topbar',
		},
		{
			icon: 'bill-line',
			text: 'æµ®åŠ¨é¢æ¿',
			name: 'sn-float-board',
		},
		{
			icon: 'circle-line',
			text: 'æµ®åŠ¨æŒ‰é’®',
			name: 'sn-float-button',
		},
		{
			icon: 'search-2-line',
			text: 'æœç´¢æ¡†',
			name: 'sn-search'
		},
		{
			icon: 'layout-2-line',
			text: 'èœå•é¡¹',
			name: 'sn-menu-item'
		},
		{
			icon: 'slideshow-view',
			text: 'åº•éƒ¨å¯¼èˆªæ ',
			name: 'sn-tabbar',
		},
		{
			icon: 'layout-column-line',
			text: 'ç€‘å¸ƒæµ',
			name: 'sn-waterfall'
		},
		{
			icon: 'layout-5-line',
			text: 'ä¾§è¾¹æ ',
			name: 'sn-sidebar'
		},
		{
			icon: 'drop-line',
			text: 'é«˜æ–¯æ¨¡ç³Š',
			name: 'sn-e-blurview'
		}
	]

	const functionList = [
		{
			icon: 'qr-scan-2-line',
			text: 'æ‰«ç ',
			name: 'sn-scan',
		},
		{
			icon: 'pen-nib-line',
			text: 'ç­¾å',
			name: 'sn-signature'
		}
	]

	const comLists = [
		{
			name: 'åŸºç¡€ç»„ä»¶',
			data: basicList
		},
		{
			name: 'è¡¨å•ç»„ä»¶',
			data: formList
		},
		{
			name: 'å±•ç¤ºç»„ä»¶',
			data: displayList
		},
		{
			name: 'åé¦ˆç»„ä»¶',
			data: feedbackList
		},
		{
			name: 'å¸ƒå±€ç»„ä»¶',
			data: layoutList
		},
		{
			name: 'åŠŸèƒ½ç»„ä»¶',
			data: functionList
		},
	]

	const libList = [
		{
			icon: 'tools-line',
			text: 'å·¥å…·åº“',
			name: 'sn-utils',
		},
		{
			icon: 'palette-line',
			text: 'é¢œè‰²åº“',
			name: 'sn-color',
		},
		{
			icon: 'hand',
			text: 'æ‰‹åŠ¿åº“',
			name: 'sn-gesture',
		},
		{
			icon: 'calendar-2-line',
			text: 'æ—¥æœŸåº“',
			name: 'sn-date',
		},
		{
			icon: 'database-2-line',
			text: 'çŠ¶æ€ç®¡ç†',
			name: 'sn-store',
		},
		{
			icon: 'qr-scan-line',
			text: 'æ‰«ç ',
			name: 'sn-scan'
		}
	]

	function gotoComponentPage(e : UTSJSONObject) {
		uni.navigateTo({
			url: `/pages/components/${e['name'] as string}`
		})
	}

	function gotoLibPage(e : UTSJSONObject) {
		uni.navigateTo({
			url: `/pages/libs/${e['name'] as string}`
		})
	}
</script>

<style lang="scss">
	.components-list {
		margin-top: 20px;
	}


	.content {
		display: flex;
		flex: 1;
	}

	.contain {
		padding: 30px 20px;
	}

	.description {
		font-size: 15px;
		color: #6e7073;
	}

	.popup-content {
		background: white;
		padding: 10px;
		width: 80%;
		margin: 10px auto;
		border-radius: 15px;
	}

	.com-item {
		padding: 10px 0;
	}
</style>