<template>
	<sn-page>
		<sn-topbar title="ÊµãËØïÈ°µ"
		bgColor="$front">
		</sn-topbar>
		<sn-alert text="Êú¨È°µÈù¢ÊòØÂºÄÂèëÊó∂È°µÈù¢,‰ªÖ‰Ωú‰∏∫ÂºÄÂèëÁî®ÈÄîÔºåÊ≠£ÂºèÂåÖ‰∏ç‰ºöÊâìÂåÖÊ≠§È°µÈù¢"
		icon="notification-fill"
		type="warning"
		style="margin-top: 10px;"></sn-alert>
		<com-card>
			<sn-button text="ËØ∑Ê±ÇÁõ∏Êú∫ÊùÉÈôê"
			@click="requestCamera"></sn-button>
			<sn-button text="ËØ∑Ê±ÇÁõ∏ÂÜåÊùÉÈôê"
			@click="requestAlbum"></sn-button>
		</com-card>
		<com-card title="üéâ ÂÖ®Â±Ä API">
			<sn-button text="ÂÖ®Â±ÄÊìç‰ΩúËèúÂçï"
			@click="showActionsheet"></sn-button>
			<sn-button class="mt-10"
			text="ÂÖ®Â±ÄÂõæÁâáÈ¢ÑËßà"
			@click="previewImage"></sn-button>
			<sn-button class="mt-10"
			text="ÂÖ®Â±ÄÊ®°ÊÄÅÊ°Ü"
			@click="showModal"></sn-button>
			<sn-button class="mt-10"
			text="ÂÖ®Â±ÄËΩªÊèêÁ§∫"
			@click="showToast"></sn-button>
		</com-card>
		<sn-perm-listener :data="permConfigs"></sn-perm-listener>
	</sn-page>
</template>

<script setup>
	import { $snui, SnShowActionsheetConfig, SnActionsheetItem, SnPreviewImageConfig, SnTabParams } from '@/uni_modules/sinle-ui'


	const colors = $snui.colors
	const snu = $snui.utils
	
	const v1 = ref(0)
	
	const permConfigs = new Map<string, UTSJSONObject>()
	permConfigs.set('android.permission.CAMERA', {
		title: 'Ê≠£Âú®ËØ∑Ê±ÇÁõ∏Êú∫ÊùÉÈôê',
		content: '‰ªÖÁî®‰∫éÊâ´Êèè‰∫åÁª¥Á†ÅÔºå‰∏ç‰ºöÂ∞ÜÊÇ®ÁöÑ‰ªª‰ΩïÈöêÁßÅÊï∞ÊçÆ‰∏ä‰º†‰∫ëÁ´Ø'
	})
	permConfigs.set('android.permission.READ_MEDIA_IMAGES', {
		title: 'Ê≠£Âú®ËØ∑Ê±ÇÁõ∏ÂÜåÊùÉÈôê',
		content: '‰ªÖÁî®‰∫éÈÄâÊã©ÂõæÁâáÔºå‰∏ç‰ºöÂ∞ÜÊÇ®ÁöÑ‰ªª‰ΩïÈöêÁßÅÊï∞ÊçÆ‰∏ä‰º†‰∫ëÁ´Ø',
		icon: 'image-circle-fill'
	})
	permConfigs.set('android.permission.READ_MEDIA_VIDEO', {
		title: 'Ê≠£Âú®ËØ∑Ê±ÇËßÜÈ¢ëÊùÉÈôê',
		content: '‰ªÖÁî®‰∫éÈÄâÊã©ËßÜÈ¢ëÔºå‰∏ç‰ºöÂ∞ÜÊÇ®ÁöÑ‰ªª‰ΩïÈöêÁßÅÊï∞ÊçÆ‰∏ä‰º†‰∫ëÁ´Ø',
	})
	permConfigs.set('android.permission.READ_MEDIA_AUDIO', {
		title: 'Ê≠£Âú®ËØ∑Ê±ÇÈü≥È¢ëÊùÉÈôê',
		content: '‰ªÖÁî®‰∫éÈÄâÊã©Èü≥È¢ëÔºå‰∏ç‰ºöÂ∞ÜÊÇ®ÁöÑ‰ªª‰ΩïÈöêÁßÅÊï∞ÊçÆ‰∏ä‰º†‰∫ëÁ´Ø',
		icon: 'disc-line'
	})
		
		
	
	function requestCamera() {
		snu.requestSystemPermission({
			permissions: ['android.permission.CAMERA'],
			success: (allRight: boolean, grantedList: string[]) => {
				console.log('ËØ∑Ê±ÇÁõ∏Êú∫ÊùÉÈôêÊàêÂäü',allRight, grantedList)
			},
			
			fail: (doNotAskAgain: boolean, deniedList: string[]) => {
				console.log('ËØ∑Ê±ÇÁõ∏Êú∫ÊùÉÈôêÂ§±Ë¥•',doNotAskAgain, deniedList)
			}
		})
	}
	
	function requestAlbum() {
		snu.requestMediaPermission({
			types: ['image', 'audio'],
			success: (allRight: boolean, grantedList: string[]) => {
				console.log('ËØ∑Ê±ÇÁõ∏ÂÜåÊùÉÈôêÊàêÂäü',allRight, grantedList)
			},
			
			fail: (doNotAskAgain: boolean, deniedList: string[]) => {
				console.log('ËØ∑Ê±ÇÁõ∏ÂÜåÊùÉÈôêÂ§±Ë¥•',doNotAskAgain, deniedList)
			}
		})
	}
	
	const d1 = [
		{
			id: 'tab1',
			text: 'ÈÄâÈ°π1'
		},
		{
			id: 'tab2',
			text: 'ÈÄâÈ°π2er1485rh148e5r'
		},
		{
			id: 'tab3',
			text: 'ÈÄâÂõ¥ËßÇÈ°π3'
		},
		{
			id: 'tab4',
			text: 'ÈÄâÈ°π4'
		},
		{
			id: 'tab5',
			text: 'ÈÄâÈ°π5erge58gËÄåÊàëÂõΩ'
		},
		{
			id: 'tab6',
			text: 'ÈÄâÈ°πÈ¢ùÊàëÁªô6'
		},
		{
			id: 'tab7',
			text: 'ÈÄâ‰∫∫‰∏™‰∫∫ÂêÑÈ°π7'
		},
		{
			id: 'tab8',
			text: 'ÈÄâÈ°π8'
		},
	] as SnTabParams[]
	
	function goTo(url: string) {
		uni.navigateTo({
			url: url,
		})
	}
	

	function select() {
		snu.chooseMedia({
			type: 'image',
			multiple: true,
			success: (files) => {
				console.log(files)
			}
		})
	}
	
	function previewImage() {
		snu.previewImage({
			urls: [
				'https://q0.itc.cn/q_70/images03/20240309/a2b719342f7b478c8633c0ade4792e46.jpeg',
			],
		} as SnPreviewImageConfig)
		
	}

	function showActionsheet() {
		snu.showActionsheet({
			actions: [
				{
					text: 'ÈÄâÈ°π1'
				},
				{
					text: 'ÈÄâÈ°π2',
				},
				{
					text: 'ÈÄâÈ°π3',
				},
				{
					text: 'ÈÄâÈ°π4',
				}
			]
		} as SnShowActionsheetConfig)
	}
	
	function showToast() {
		snu.showToast({
			text: 'ËΩªÊèêÁ§∫',
			loading: true
		})
	}
	
	function showModal() {
		snu.showModal({
			title: 'Modal',
			content: 'Hello World',
			buttonType: 'float',
			
		})
	}
</script>

<style lang="scss">
</style>